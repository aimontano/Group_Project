(function(e){function t(t){for(var s,i,o=t[0],l=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],r[i]&&p.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={app:0},n=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("c21b"),r=a.n(s);r.a},"146b":function(e,t,a){"use strict";var s=a("1e8b"),r=a.n(s);r.a},"1e8b":function(e,t,a){},3948:function(e,t,a){"use strict";var s=a("672d"),r=a.n(s);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),r=a("8c4f"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container mt-5",attrs:{id:"main-content"}},[a("div",{staticClass:"row justify-content-md-center"},[a("div",{staticClass:"col-md-6"},[a("h2",{staticClass:"text-center"},[e._v(e._s(e.title))]),a("p",{staticClass:"lead text-danger",attrs:{id:"message"}},[e._v(e._s(e.userMessage))]),a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"userEmail"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.emailValue,expression:"emailValue"}],staticClass:"form-control",attrs:{type:"email",id:"userEmail"},domProps:{value:e.emailValue},on:{input:function(t){t.target.composing||(e.emailValue=t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"userPassword"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordValue,expression:"passwordValue"}],staticClass:"form-control",attrs:{type:"password",id:"userPassword"},domProps:{value:e.passwordValue},on:{input:function(t){t.target.composing||(e.passwordValue=t.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{id:"btnLogin"},on:{click:function(t){t.preventDefault(),e.userLogin(),e.resetInputs()}}},[e._v("Login")]),a("button",{staticClass:"btn btn-info float-right",attrs:{id:"btnSignUp"},on:{click:function(t){t.preventDefault(),e.userSignUp(),e.resetInputs()}}},[e._v("Sign Up")])])])])])},l=[],u={name:"Login",data:function(){return{title:"Login",userMessage:"",emailValue:"",passwordValue:""}},methods:{resetInputs:function(){this.emailValue="",this.passwordValue=""},userLogin:function(e){var t=this,a=firebase.auth(),s=this.emailValue.trim(),r=this.passwordValue.trim();if(""!=s&&""!=r){var n=a.signInWithEmailAndPassword(s,r);n.catch(function(e){t.userMessage=e.message}),n.then(function(e){t.$router.push({path:"/home"})})}else this.userMessage="You must enter email & password!"},userSignUp:function(e){var t=this,a=firebase.auth(),s=this.emailValue.trim(),r=this.passwordValue.trim();if(""!=s&&""!=r){var n=a.createUserWithEmailAndPassword(s,r);n.then(function(){t.$router.push({name:"register",params:{email:s}})}),n.catch(function(e){t.userMessage=e.message})}else this.userMessage="You must enter email & password!"}}},c=u,d=a("2877"),p=Object(d["a"])(c,o,l,!1,null,null,null);p.options.__file="login.vue";var m=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container mt-5",attrs:{id:"register-content"}},[a("div",{staticClass:"row justify-content-md-center"},[a("div",{staticClass:"col-md-6"},[a("h2",{staticClass:"text-center"},[e._v(e._s(e.title))]),a("p",{staticClass:"lead text-danger",attrs:{id:"message"}},[e._v(e._s(e.userMessage))]),a("form",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"userName"}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"userName"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"lastName"}},[e._v("Last Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",id:"lastName"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})])])])]),a("button",{staticClass:"btn btn-outline-primary btn-lg btn-block",attrs:{id:"btnRegister"},on:{click:function(t){t.preventDefault(),e.registerUser()}}},[e._v("Register & Login")])])])},h=[],v=(a("7f7f"),{name:"Register",data:function(){return{title:"Register",name:"",lastName:"",address:"",interests:"",userMessage:""}},props:["email"],methods:{registerUser:function(e,t,a){if(""!=this.name&&""!=this.lastName){var s=firebase.database(),r=firebase.auth().currentUser.uid,n=s.ref("/users/"+r);n.once("value").then(function(e){}),n.set({userName:this.name,lastName:this.lastName,email:this.email}),this.$router.push({path:"/home"})}else this.userMessage="You Must Enter Your First And Last Name"}}}),g=v,b=Object(d["a"])(g,f,h,!1,null,null,null);b.options.__file="register.vue";var _=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-100",attrs:{id:"set-map"}},[a("GmapMap",{ref:"myMap",staticStyle:{width:"100%",height:"100%"},attrs:{center:e.userPosition,zoom:15,"map-type-id":"terrain"}},[e.userMarker?a("GmapMarker",{attrs:{position:{lat:e.userMarker.lat,lng:e.userMarker.lng},clickable:!0,draggable:!1},on:{click:function(t){e.center={lat:e.userMarker.lat,lng:e.userMarker.lng}}}}):e._e(),e._l(e.mapMarkerArray,function(t,s){return a("GmapMarker",{key:s,attrs:{position:{lat:t.lat,lng:t.lng},clickable:!0,draggable:!1},on:{click:function(a){e.center={lat:t.lat,lng:t.lng}}}})})],2)],1)},C=[],M={name:"Map",props:["mapMarkerArray","userMarker"],updated:function(){this.resetBounds()},mounted:function(){this.resetBounds()},data:function(){return{userId:null,userPosition:{lat:0,lng:0}}},methods:{resetBounds:function(){var e=this;this.$refs.myMap.$mapPromise.then(function(t){for(var a=new google.maps.LatLngBounds,s=0;s<e.mapMarkerArray.length;s++)a.extend({lat:e.mapMarkerArray[s].lat,lng:e.mapMarkerArray[s].lng});e.userMarker&&a.extend(e.userMarker),(e.userMarker||e.mapMarkerArray.length>0)&&e.$refs.myMap.fitBounds(a)})}}},w=M,k=Object(d["a"])(w,y,C,!1,null,null,null);k.options.__file="map.vue";var U=k.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card",staticStyle:{width:"18rem"},attrs:{id:"user-list"}},[a("ul",{staticClass:"list-group list-group-flush"},e._l(e.onlineUsers,function(t,s){return a("li",{key:s,staticClass:"list-group-item"},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){t.preventDefault(),e.$emit("user-selected",s)}}},[e._v(e._s(t.userName))])])})),0===e.onlineUsers.length?a("span",[e._v("No users online...")]):e._e()])},x=[],A={name:"Users",props:["onlineUsers"],data:function(){return{title:"Users",userList:[],selected:[]}},methods:{}},L=A,P=(a("3948"),Object(d["a"])(L,N,x,!1,null,"5265bc7a",null));P.options.__file="users.vue";var j=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-light bg-light"},[a("span",{staticClass:"navbar-brand mb-0 h1"},[e._v(e._s(e.title))]),a("button",{staticClass:"btn btn-warning",on:{click:function(t){t.preventDefault(),e.signOut()}}},[e._v("Sign Out")]),a("button",{staticClass:"btn btn-danger",on:{click:function(t){t.preventDefault(),e.showChat=!e.showChat,e.$emit("toggle-chat",e.showChat)}}},[e._v("Chat")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.showUserList=!e.showUserList,e.$emit("toggle-user-list",e.showUserList)}}},[e._v("Users: "),a("span",{staticClass:"badge badge-light badge-pill"},[e._v(e._s(e.users))])])])},S=[],D={name:"Nav",props:["users"],data:function(){return{title:"Donde",showUserList:!1,showChat:!1}},methods:{signOut:function(){var e=this,t=firebase.auth();t.signOut().then(function(){e.$router.push({path:"/"})})}}},E=D,$=(a("146b"),Object(d["a"])(E,O,S,!1,null,"cd9d898c",null));$.options.__file="nav.vue";var V=$.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid h-100 d-flex flex-column",attrs:{id:"app"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12",attrs:{id:"navbar-column"}},[a("NavBar",{attrs:{users:e.onlineUsers.length},on:{"toggle-chat":function(t){e.toggleChat(t)},"toggle-user-list":function(t){e.toggleUserList(t)}}})],1)]),a("div",{staticClass:"row flex-fill d-flex"},[a("div",{staticClass:"col-12"},[a("Map",{attrs:{"map-marker-array":e.mapMarkerArray,"user-marker":e.userMarker}}),e.showUserList?a("Users",{attrs:{"online-users":e.onlineUsers},on:{"user-selected":function(t){e.onUserSelected(t)}}}):e._e()],1)]),e.showChat?a("Chat"):e._e()],1)},B=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat-app"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("Donde Chat")]),a("h6",{staticClass:"card-subtitle",attrs:{id:"userWelcome",value:""}},[e._v(e._s(e.displayName))])]),a("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"card-body messages",attrs:{id:"chat-display"}},e._l(e.chatData,function(t){return a("span",{key:t.id},[a("div",{staticClass:"card",attrs:{id:"new-chat-bubble"}}),a("span",{staticClass:"card-title",attrs:{id:"chat-sender"}},[e._v(e._s(t.sender)+":")]),a("span",{staticClass:"card-text p-2",attrs:{id:"chat-content"}},[e._v(e._s(t.chat))]),a("span",{staticClass:"card-text",attrs:{id:"chat-time"}},[e._v(e._s(t.time))])])})),a("div",{staticClass:"card-body",attrs:{id:"new-message-box"}},[a("div",{staticClass:"form-group"},[a("form",[e._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.chatMessage,expression:"chatMessage"}],staticClass:"form-control",attrs:{type:"text",id:"newChat",placeholder:"enter message"},domProps:{value:e.chatMessage},on:{input:function(t){t.target.composing||(e.chatMessage=t.target.value)}}}),a("button",{staticClass:"btn btn-success",attrs:{id:"send-message-btn"},on:{click:function(t){t.preventDefault(),e.sendMessage()}}},[e._v("Send")])])])])])])},R=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"newMessage"}},[a("h4",[e._v("New Message:")])])}],Y={name:"Chat",data:function(){return{chatMessage:"",chatData:[],displayName:""}},methods:{sendMessage:function(e){var t=firebase.database(),a=this.displayName,s=moment().format("MM/DD/YY - hh:mm:ss A"),r={user:a,message:this.chatMessage,timestamp:s};t.ref("/chat/").push(r),this.chatMessage=""}},created:function(){var e=this,t=firebase.database(),a=firebase.auth().currentUser,s=a.uid,r=firebase.database().ref("/users/"+s);r.on("value",function(t){e.displayName=t.val().userName}),this.userName=r.userName,t.ref("/chat/").on("child_added",function(t){var a=t.val().user,s=t.val().message,r=t.val().timestamp,n=t.key,i={sender:a,chat:s,time:r,id:n};e.chatData.push(i)})}},z=Y,F=(a("e0ef"),Object(d["a"])(z,T,R,!1,null,"41650198",null));F.options.__file="chat.vue";var q=F.exports,G={name:"Home",components:{NavBar:V,Map:U,Chat:q,Users:j},created:function(){var e=this,t=firebase.auth().currentUser;if(null===t)this.$router.push({path:"/"});else{var a=t.uid,s=firebase.database().ref("/users/"+a);s.once("value").then(function(t){var s=t.val(),r=(firebase.auth().currentUser,firebase.auth().currentUser.uid);e.userId=r;var n=firebase.database().ref("/users/"+r),i={state:"offline",last_changed:firebase.database.ServerValue.TIMESTAMP,name:s.userName},o={state:"online",last_changed:firebase.database.ServerValue.TIMESTAMP,name:s.userName};navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(s){var r={lng:s.coords.longitude,lat:s.coords.latitude},l=t.val();e.userMarker=r,console.log("this.userMarker",e.userMarker),e.persistLocation(a,l.userName,r).then(function(){firebase.database().ref(".info/connected").on("value",function(t){0!=t.val()&&(n.onDisconnect().update(i).then(function(){n.update(o)}),e.checkForOnlineUsers())})})})})}},data:function(){return{title:"Donde",showUserList:!1,showChat:!1,userId:"",onlineUsers:[],mapMarkerArray:[],userMarker:null}},methods:{minimize:function(){},checkForOnlineUsers:function(){var e=this,t=firebase.database().ref("/users/");t.orderByChild("state").equalTo("online").on("child_added",function(t){var a=t.val();a.id=t.key,t.key===e.userId||e.onlineUsers.push(a)}),t.orderByChild("state").equalTo("online").on("child_removed",function(t){for(var a=t.key,s=0;s<e.onlineUsers.length;s++)e.onlineUsers[s].id==a&&e.onlineUsers.splice(s,1);for(var r=0;r<e.mapMarkerArray.length;r++)e.mapMarkerArray[r].id==a&&e.mapMarkerArray.splice(r,1)})},onUserSelected:function(e){for(var t=this.onlineUsers[e],a=0;a<this.mapMarkerArray.length;a++)if(t===this.mapMarkerArray[a])return void this.mapMarkerArray.splice(a,1);this.mapMarkerArray.push(t)},toggleUserList:function(e){this.showUserList=!0===e},toggleChat:function(e){this.showChat=!0===e},persistLocation:function(e,t,a){return firebase.database().ref("/users/"+e).update({lat:a.lat,lng:a.lng})}}},W=G,Z=(a("8ba8"),Object(d["a"])(W,I,B,!1,null,"49398bd2",null));Z.options.__file="home.vue";var J=Z.exports,X=[{path:"/",component:m},{path:"/register/:email",name:"register",component:_,props:!0},{path:"/map",component:U},{path:"/users",component:j},{path:"/nav",component:V},{path:"/home",component:J},{path:"/chat",component:q}],H={name:"app",data:function(){return{}},components:{}},K=H,Q=(a("034f"),Object(d["a"])(K,n,i,!1,null,null,null));Q.options.__file="App.vue";var ee=Q.exports,te=a("755e"),ae=a("123d"),se=a.n(ae);s["a"].use(r["a"]),s["a"].use(se.a),s["a"].config.productionTip=!1;var re=new r["a"]({routes:X,mode:"history"});s["a"].use(te,{load:{key:"AIzaSyBXERsAFMf5LFPggyP1uxEAZAyq9gEp65A",libraries:"places"}}),new s["a"]({render:function(e){return e(ee)},router:re,created:function(){var e={apiKey:"AIzaSyBIvDXDBSaV3DavZ24nMwEv_TyCZvAg39s",authDomain:"myproject-998de.firebaseapp.com",databaseURL:"https://myproject-998de.firebaseio.com",projectId:"myproject-998de",storageBucket:"myproject-998de.appspot.com",messagingSenderId:"181746070689"};firebase.initializeApp(e)}}).$mount("#app")},"672d":function(e,t,a){},"8ba8":function(e,t,a){"use strict";var s=a("e20b"),r=a.n(s);r.a},c21b:function(e,t,a){},e0ef:function(e,t,a){"use strict";var s=a("eb04"),r=a.n(s);r.a},e20b:function(e,t,a){},eb04:function(e,t,a){}});
//# sourceMappingURL=app.9b719dfe.js.map